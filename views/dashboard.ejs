<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Techinf | Write a story</title>
    <link rel="stylesheet" href="./../public/dashboard.css" />
    <link rel="stylesheet" href="./../public/dashboard_.css" />
  </head>
  <body>
    <%- include('./partials/header.ejs') -%>
    <div id="body" class="flex box-content flex-col">
      <div class="sm:flex sm:justify-center sm:my-4 my-10">
        <div class="sm:w-7/12 flex flex-row justify-between sm:p-4 px-4">
          <div class="">
            <button
              id="Init"
              class="px-3 rounded py-2 bg-green-600 text-white text-sm"
            >
              View all posts
            </button>
          </div>
          <div>
            <button
              onclick="logout()"
              class="px-4 rounded py-2 bg-red-600 text-white text-sm"
            >
              Logout
            </button>
          </div>
        </div>
      </div>
      <div id="dashboard" class="sm:self-center flex flex-col">
        <div id="all_posts" class="p-2">
          <%data.forEach(post =>{ %>
          <div
            id="post"
            class="border-2 p-3 flex sm:flex-row justify-between border-gray-400 my-3 sm:p-4"
          >
            <div>
              <span id="title" class="sm:text-base text-sm">
                <%= post._id %>
              </span>
              <br />
              <span id="snippet" class="sm:text-sm text-xs">
                <%= post.snippet %>
              </span>
              <br />
              <span id="time" class="text-xs"><%=post.time %></span>
            </div>
            <div id="delete_btn" class="flex flex-col">
              <div
                id="delete_icon"
                class="p-3 hover:cursor-pointer bg-red-600"
              ></div>
            </div>
          </div>
          <%})%>
        </div>
        <div
          id="create_post"
          class="text-white bg-slate-700 flex flex-col rounded p-4 self-center"
        >
          <div class="">
            <p class="sm:p-4 text-center text-sm font-bold">
              CREATE A NEW POST
            </p>
            <!-- inputs -->
            <form action="/post" method="post" enctype="multipart/form-data">
              <div class="flex flex-row my-4 bg-white rounded">
                <div id="img_h">
                  <img src="./../public/Title100.png" alt="" />
                </div>
                <div class="w-full">
                  <textarea
                    type="text"
                    required
                    name="title"
                    class="w-full p-2 h-10 resize-none rounded text-black outline-none text-sm"
                    placeholder="The title goes here..."
                    minlength="20"
                  ></textarea>
                </div>
              </div>

              <div class="flex flex-row my-4 bg-white rounded">
                <div id="img_h">
                  <img src="./../public/Snippets100.png" alt="" />
                </div>
                <div class="w-full">
                  <textarea
                    type="text"
                    required
                    name="snippet"
                    class="w-full p-2 h-10 rounded resize-none text-black outline-none text-sm"
                    placeholder="The snippet goes here"
                    minlength="20"
                  ></textarea>
                </div>
              </div>

              <div class="flex flex-row my-4 bg-white rounded">
                <div id="img_h">
                  <img src="./../public/Keyword100.png" alt="" />
                </div>
                <div class="w-full">
                  <textarea
                    type="text"
                    required
                    name="keywords"
                    class="w-full p-2 h-10 rounded resize-none text-black outline-none text-sm"
                    placeholder="Keywords, separate with comma"
                    minlength="20"
                  ></textarea>
                </div>
              </div>

              <div class="flex flex-row my-4 bg-white rounded">
                <div id="img_h">
                  <img src="./../public/Img100.png" alt="" />
                </div>
                <div class="w-full">
                  <input
                    type="file"
                    required
                    id="file"
                    name="image"
                    accept="image/png, image/jpeg"
                    class="w-full p-2 h-10 rounded resize-none text-black outline-none text-sm"
                  />
                </div>
              </div>

              <div class="flex flex-row my-4 bg-white rounded">
                <div id="img_h">
                  <img src="./../public/Body100.png" alt="" />
                </div>
                <div class="w-full">
                  <textarea
                    type="text"
                    required
                    name="body"
                    class="w-full p-2 h-14 rounded resize-none text-black outline-none text-sm"
                    placeholder="The main post..."
                    minlength="20"
                  ></textarea>
                </div>
              </div>

              <div class="flex flex-row mt-3 justify-center">
                <button class="bg-blue-600 px-4 py-2 font-bold text-sm rounded">
                  POST
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script src="./../public/jquery.js"></script>
  <script src="./../public/dashboard.js"></script>
  <script>
    let time = document.querySelectorAll("#time");
    time.forEach((item) => {
      let d = new Date(item.innerText).toLocaleDateString();
      item.innerText = d;
    });
  </script>
</html>
